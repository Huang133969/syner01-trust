<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图书管理系统</title>
    <style>
        /* 基础样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            padding-bottom: 50px;
        }
        
        /* 导航栏样式 */
        .navbar {
            background-color: #333;
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
        }
        
        .navbar a {
            flex: 1;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 10px;
            text-decoration: none;
            font-size: 17px;
            min-width: 100px;
            transition: all 0.3s ease;
        }
        
        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }
        
        .navbar a.active {
            background-color: #4CAF50;
            color: white;
        }
        
        /* 内容区域样式 */
        .content {
            padding: 20px;
            margin-top: 10px;
        }
        
        /* 表单样式 */
        .book-form {
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button.delete {
            background-color: #f44336;
        }
        
        button.delete:hover {
            background-color: #d32f2f;
        }
        
        button.borrowed {
            background-color: #ff9800;
        }
        
        button.borrowed:hover {
            background-color: #e68a00;
        }
        
        /* 图书列表样式 */
        .book-list {
            margin-top: 20px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #4CAF50;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        tr:hover {
            background-color: #e9e9e9;
        }
        
        /* 隐藏内容区域 */
        .hidden {
            display: none;
        }
        
        /* 操作按钮单元格 */
        .actions {
            white-space: nowrap;
        }
        
        /* 状态标签 */
        .status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .status-available {
            background-color: #4CAF50;
            color: white;
        }
        
        .status-borrowed {
            background-color: #f44336;
            color: white;
        }
        
        /* 搜索框样式 */
        .search-container {
            margin: 20px 0;
        }
        
        .search-container input {
            padding: 10px;
            width: 300px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* 响应式设计 */
        @media screen and (max-width: 600px) {
            .navbar a {
                float: none;
                display: block;
                text-align: left;
            }
            
            .book-form {
                width: 100%;
                padding: 15px;
            }
            
            .search-container input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <a class="active" href="#" onclick="showSection('home')">首页</a>
        <a href="#" onclick="showSection('list')">图书列表</a>
        <a href="#" onclick="showSection('administration')">图书管理</a>
        <a href="#" onclick="showSection('about')">关于</a>
    </div>
    
    <div class="content">
        <!-- 首页内容 -->
       <div id="home-section">
    <div style="max-width: 800px; margin: 0 auto; padding: 20px;">
        <!-- 标题部分 -->
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #2c3e50; font-size: 2.5em; margin-bottom: 10px;">图书管理系统</h1>
        </div>
        
        <!-- 欢迎语 -->
        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
            <h2 style="color: #4CAF50; margin-top: 0;">欢迎使用</h2>
            <p style="line-height: 1.6;">这是一个功能完善的图书管理系统，可以帮助您轻松管理图书信息、跟踪借阅状态。</p>
        </div>
        
        <!-- 功能说明 -->
        <div style="margin-bottom: 30px;">
            <h2 style="color: #4CAF50; border-bottom: 2px solid  #4CAF50; padding-bottom: 8px;">主要功能</h2>
            
            <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
                <!-- 图书列表功能 -->
                <div style="flex: 1; min-width: 250px; background-color: #e8fcf0; padding: 15px; border-radius: 8px; border-left: 4px solid  #4CAF50;">
                    <h3 style="margin-top: 0; color: #4CAF50;"> 图书列表</h3>
                    <ul style="padding-left: 20px; line-height: 1.6;">
                        <li>查看所有图书信息</li>
                        <li>实时显示借阅状态</li>
                        <li>快速搜索功能</li>
                        <li>借出/归还操作</li>
                    </ul>
                </div>
                
                <!-- 图书管理功能 -->
                <div style="flex: 1; min-width: 250px; background-color: #e8fcf0; padding: 15px; border-radius: 8px; border-left: 4px solid  #4CAF50;">
                    <h3 style="margin-top: 0; color: #4CAF50;"> 图书管理</h3>
                    <ul style="padding-left: 20px; line-height: 1.6;">
                        <li>添加新图书</li>
                        <li>编辑图书信息</li>
                        <li>删除图书记录</li>
                        <li>设置初始状态</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- 快速开始 -->
        <div>
            <h2 style="color:  #4CAF50; border-bottom: 2px solid  #4CAF50; padding-bottom: 8px;">快速开始</h2>
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                <p style="font-weight: bold; margin-bottom: 10px;">如何使用本系统：</p>
                <ol style="padding-left: 20px; line-height: 1.6;">
                    <li>点击上方导航栏的<b>"图书管理"</b>添加新书</li>
                    <li>在<b>"图书列表"</b>中查看所有图书</li>
                    <li>点击<b>"借出"</b>按钮记录借阅信息</li>
                    <li>图书归还时点击<b>"归还"</b>按钮</li>
                </ol>
            </div>
        </div>
    </div>
</div>
        
        <!-- 图书列表内容 -->
        <div id="list-section" class="hidden">
            <h1>图书列表</h1>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="搜索图书..." onkeyup="searchBooks()">
            </div>
            <div class="book-list">
                <table id="book-table">
                    <thead>
                        <tr>
                            <th>书名</th>
                            <th>作者</th>
                            <th>ISBN</th>
                            <th>类别</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="book-table-body">
                        <!-- 图书将通过JavaScript动态添加 -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 图书管理内容 -->
        <div id="administration-section" class="hidden">
            <h1>图书管理</h1>
            <div class="book-form">
                <input type="hidden" id="edit-index" value="-1">
                <div class="form-group">
                    <label for="book-title">书名:</label>
                    <input type="text" id="book-title" required>
                </div>
                <div class="form-group">
                    <label for="book-author">作者:</label>
                    <input type="text" id="book-author" required>
                </div>
                <div class="form-group">
                    <label for="book-isbn">ISBN:</label>
                    <input type="text" id="book-isbn" required>
                </div>
                <div class="form-group">
                    <label for="book-category">类别:</label>
                    <select id="book-category">
                        <option value="文学">文学</option>
                        <option value="科技">科技</option>
                        <option value="历史">历史</option>
                        <option value="艺术">艺术</option>
                        <option value="教育">教育</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="book-status">初始状态:</label>
                    <select id="book-status">
                        <option value="available">可借阅</option>
                        <option value="borrowed">已借出</option>
                    </select>
                </div>
                <button onclick="saveBook()">保存图书</button>
                <button onclick="clearForm()" class="delete">清空表单</button>
            </div>
        </div>
        
        <!-- 关于内容 -->
        <div id="about-section" class="hidden">
            <h1>关于系统</h1>
            <p>这是一个基于浏览器的图书管理系统</p>
            <p>使用HTML、CSS和JavaScript构建</p>
            <p>数据存储在浏览器的localStorage中</p>
            <p>版本: 1.2.0</p>
        </div>
    </div>

    <script>
        // 存储图书数据的数组
        let books = [];
        let currentEditIndex = -1;
        
        // 页面加载时初始化
        window.onload = function() {
            loadBooks();
            showSection('home');
        };
        
        // 从localStorage加载图书数据
        function loadBooks() {
            const savedBooks = localStorage.getItem('books');
            if (savedBooks) {
                books = JSON.parse(savedBooks);
            }
            refreshBookList();
        }
        
        // 保存图书数据到localStorage
        function saveBooksToStorage() {
            localStorage.setItem('books', JSON.stringify(books));
        }
        
        // 显示选中的内容区域
        function showSection(sectionId) {
            // 隐藏所有内容区域
            document.getElementById('home-section').classList.add('hidden');
            document.getElementById('list-section').classList.add('hidden');
            document.getElementById('administration-section').classList.add('hidden');
            document.getElementById('about-section').classList.add('hidden');
            
            // 移除所有导航链接的active类
            const navLinks = document.querySelectorAll('.navbar a');
            navLinks.forEach(link => link.classList.remove('active'));
            
            // 显示选中的内容区域
            document.getElementById(`${sectionId}-section`).classList.remove('hidden');
            
            // 为当前导航链接添加active类
            event.target.classList.add('active');
            
            // 如果是列表页面，刷新图书列表
            if (sectionId === 'list') {
                refreshBookList();
            }
            
            // 如果是管理页面，清空表单
            if (sectionId === 'administration') {
                clearForm();
            }
        }
        
        // 保存图书（添加或更新）
        function saveBook() {
            const title = document.getElementById('book-title').value;
            const author = document.getElementById('book-author').value;
            const isbn = document.getElementById('book-isbn').value;
            const category = document.getElementById('book-category').value;
            const status = document.getElementById('book-status').value;
            
            if (!title || !author || !isbn) {
                alert('请填写所有必填字段！');
                return;
            }
            
            const book = {
                title: title,
                author: author,
                isbn: isbn,
                category: category,
                status: status,
                borrower: status === 'borrowed' ? '未知' : null,
                borrowDate: status === 'borrowed' ? new Date().toLocaleDateString() : null
            };
            
            if (currentEditIndex === -1) {
                // 添加新书
                books.push(book);
            } else {
                // 更新现有书籍
                books[currentEditIndex] = {
                    ...books[currentEditIndex],
                    title: title,
                    author: author,
                    isbn: isbn,
                    category: category
                };
                currentEditIndex = -1;
                document.getElementById('edit-index').value = "-1";
            }
            
            saveBooksToStorage();
            refreshBookList();
            clearForm();
            showSection('list');
        }
        
        // 刷新图书列表
        function refreshBookList() {
            const tableBody = document.getElementById('book-table-body');
            tableBody.innerHTML = '';
            
            if (books.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="6" style="text-align: center;">暂无图书数据</td>';
                tableBody.appendChild(row);
            } else {
                books.forEach((book, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${book.title}</td>
                        <td>${book.author}</td>
                        <td>${book.isbn}</td>
                        <td>${book.category}</td>
                        <td>
                            <span class="status status-${book.status === 'available' ? 'available' : 'borrowed'}">
                                ${book.status === 'available' ? '可借阅' : '已借出'}
                            </span>
                            ${book.status === 'borrowed' ? `<br><small>借阅人: ${book.borrower || '未知'}</small>` : ''}
                        </td>
                        <td class="actions">
                            <button onclick="toggleBookStatus(${index})" class="${book.status === 'borrowed' ? 'borrowed' : ''}">
                                ${book.status === 'available' ? '借出' : '归还'}
                            </button>
                            <button onclick="editBook(${index})">编辑</button>
                            <button onclick="deleteBook(${index})" class="delete">删除</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }
        
        // 切换书籍状态（借出/归还）
        function toggleBookStatus(index) {
            const book = books[index];
            
            if (book.status === 'available') {
                // 借出书籍
                const borrower = prompt('请输入借阅人姓名:', '未知');
                if (borrower !== null) {
                    books[index] = {
                        ...book,
                        status: 'borrowed',
                        borrower: borrower || '未知',
                        borrowDate: new Date().toLocaleDateString()
                    };
                    saveBooksToStorage();
                    refreshBookList();
                }
            } else {
                // 归还书籍
                if (confirm(`确定要将《${book.title}》标记为已归还吗？`)) {
                    books[index] = {
                        ...book,
                        status: 'available',
                        borrower: null,
                        borrowDate: null
                    };
                    saveBooksToStorage();
                    refreshBookList();
                }
            }
        }
        
        // 编辑图书
        function editBook(index) {
            const book = books[index];
            document.getElementById('book-title').value = book.title;
            document.getElementById('book-author').value = book.author;
            document.getElementById('book-isbn').value = book.isbn;
            document.getElementById('book-category').value = book.category;
            document.getElementById('book-status').value = book.status;
            
            currentEditIndex = index;
            document.getElementById('edit-index').value = index;
            
            showSection('administration');
        }
        
        // 删除图书
        function deleteBook(index) {
            if (confirm('确定要删除这本书吗？')) {
                books.splice(index, 1);
                saveBooksToStorage();
                refreshBookList();
            }
        }
        
        // 清空表单
        function clearForm() {
            document.getElementById('book-title').value = '';
            document.getElementById('book-author').value = '';
            document.getElementById('book-isbn').value = '';
            document.getElementById('book-category').value = '文学';
            document.getElementById('book-status').value = 'available';
            
            currentEditIndex = -1;
            document.getElementById('edit-index').value = "-1";
        }
        
        // 搜索图书
        function searchBooks() {
            const input = document.getElementById('search-input');
            const filter = input.value.toUpperCase();
            const table = document.getElementById('book-table');
            const tr = table.getElementsByTagName('tr');
            
            for (let i = 1; i < tr.length; i++) {
                let found = false;
                const td = tr[i].getElementsByTagName('td');
                
                for (let j = 0; j < td.length - 1; j++) { // 排除操作列
                    if (td[j]) {
                        const txtValue = td[j].textContent || td[j].innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }
                
                if (found) {
                    tr[i].style.display = '';
                } else {
                    tr[i].style.display = 'none';
                }
            }
        }
    </script>
</body>
</html>